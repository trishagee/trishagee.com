<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="description" content="">
<meta name="keywords" content="java, lmax, gwt, ui, html, ">

 
<meta property="og:type" content="article"/>
<meta property="og:description" content=""/>
<meta property="og:title" content="GWT: Why VerticalPanel is Evil : trishagee.github.io"/>
<meta property="og:site_name" content="Trisha Gee"/>
<meta property="og:image" content="" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="" />
<meta property="og:image:height" content="" />
<meta property="og:url" content="http://trishagee.github.io/post/gwt_why_verticalpanel_is_evil">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2011-01-21"/>
<meta property="article:modified_time" content="2011-01-21"/>

<meta property="article:tag" content="java">
<meta property="article:tag" content="lmax">
<meta property="article:tag" content="gwt">
<meta property="article:tag" content="ui">
<meta property="article:tag" content="html">



<meta name="twitter:card" content="summary">

<meta name="twitter:site" content="@trisha_gee">
<meta name="twitter:title" content="GWT: Why VerticalPanel is Evil : trishagee.github.io">
<meta name="twitter:creator" content="@trishagee">
<meta name="twitter:description" content="">
<meta name="twitter:image:src" content="">
<meta name="twitter:domain" content="trishagee.github.io">



    <base href="http://trishagee.github.io/">
    <title> GWT: Why VerticalPanel is Evil - trishagee.github.io </title>
    <link rel="canonical" href="http://trishagee.github.io/post/gwt_why_verticalpanel_is_evil">
    

    <link href='http://fonts.googleapis.com/css?family=Fjalla+One|Open+Sans:300' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="http://trishagee.github.io/static/css/style.css">
<link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/default.min.css">
<script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

    <link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/default.min.css">
    <script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>
</head>

<body lang="en" itemscope itemtype="http://schema.org/Article">
<header id="header">
    <div id="byline">by Trisha Gee</div>
    <nav id="nav">
        <ul id="mainnav">
    <li>
        <a href="http://trishagee.github.io/post/">
            <span class="icon"> <i aria-hidden="true" class="icon-quill"></i></span>
            <span> blog </span>
        </a>
    </li>
    <li>
        <a href="http://trishagee.github.io/project/">
            <span class="icon"> <i aria-hidden="true" class="icon-console"></i></span>
            <span> code </span>
        </a>
    </li>
    <li>
        <a href="http://trishagee.github.io/presentation/">
            <span class="icon"> <i aria-hidden="true" class="icon-stats"></i></span>
            <span> talks </span>
        </a>
    </li>
    <li>
        <a href="http://trishagee.github.io/resources/">
            <span class="icon"> <i aria-hidden="true" class="icon-gears"></i></span>
            <span> resources </span>
        </a>
    </li>
</ul>

        <ul id="social">
    <li id="share">
        <span class="icon icon-bubbles"> </span>
        <span class="title"> share </span>

        <div class="dropdown share">
            <ul class="social">
                <li><a href="https://twitter.com/intent/tweet?status=GWT%3a%20Why%20VerticalPanel%20is%20Evil-http%3a%2f%2ftrishagee.github.io%2fpost%2fgwt_why_verticalpanel_is_evil" target="_blank"
                       title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a></li>
                <li><a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2ftrishagee.github.io%2fpost%2fgwt_why_verticalpanel_is_evil" target="_blank" title="Join me on Facebook"
                       class="facebook"><span class="icon icon-facebook"></span>Facebook</a></li>
                <li><a href="https://plus.google.com/share?url=http%3a%2f%2ftrishagee.github.io%2fpost%2fgwt_why_verticalpanel_is_evil" target="_blank" title="Google+" class="googleplus"><span
                        class="icon icon-google-plus"></span>Google+</a></li>
                <li><a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2ftrishagee.github.io%2fpost%2fgwt_why_verticalpanel_is_evil&title=GWT%3a%20Why%20VerticalPanel%20is%20Evil&source=spf13"
                       target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a></li>
                <li><a href="http://del.icio.us/post?url=http%3a%2f%2ftrishagee.github.io%2fpost%2fgwt_why_verticalpanel_is_evil" target="_blank" title="Delicious" class="delicious"><span
                        class="icon icon-delicious"></span>Delicious</a></li>
                <li><a href="http://www.reddit.com/submit?url=http%3a%2f%2ftrishagee.github.io%2fpost%2fgwt_why_verticalpanel_is_evil" target="_blank" title="Reddit" class="reddit"><span
                        class="icon icon-reddit"></span>Reddit</a></li>
                <li><a href="http://www.stumbleupon.com/submit?url=http%3a%2f%2ftrishagee.github.io%2fpost%2fgwt_why_verticalpanel_is_evil" target="_blank" title="StumbleUpon"
                       class="stumbleupon"><span class="icon icon-stumbleupon"></span>StumbleUpon</a></li>
                <li><a href="http://www.dzone.com/links/add.html?url=http%3a%2f%2ftrishagee.github.io%2fpost%2fgwt_why_verticalpanel_is_evil&title=GWT%3a%20Why%20VerticalPanel%20is%20Evil" target="_blank" title="DZone"
                       class="dzone"><span class="icon icon-dzone"></span>DZone</a></li>
            </ul>
            <span class="subcount">sharing is caring</span>
        </div>
    </li>
    <li id="follow">
        <span class="icon icon-rocket"> </span>
        <span class="title"> follow </span>

        <div class="dropdown follow">
            <ul class="social">
                <li><a href="http://trishagee.github.io/index.xml" target="_blank" title="Subscribe by RSS" class="rss"><span
                        class="icon icon-feed-2"></span>RSS</a></li>
                <li><a href="http://www.twitter.com/trisha_gee" target="_blank" title="Follow me on Twitter" class="twitter"><span
                        class="icon icon-twitter"></span>Twitter</a></li>
                <li><a href="http://www.linkedin.com/in/trishagee" target="_blank" title="LinkedIn" class="linkedin"><span class="
                        icon icon-linkedin"></span>LinkedIn</a></li>
                <li><a href="http://github.com/trishagee" target="_blank" title="GitHub" class="github"><span class="
                        icon icon-github"></span>GitHub</a></li>
                <li><a href="http://www.slideshare.net/trishagee" target="_blank" title="SlideShare" class="slideshare"><span
                        class="icon icon-slideshare"></span>SlideShare</a></li>
                <li><a href="https://plus.google.com/+TrishaGee/" target="_blank" title="Google+" class="googleplus"><span
                        class="icon icon-google-plus"></span>Google+</a></li>
            </ul>
            <span class="subcount"></span>
        </div>
    </li>
</ul>

    </nav>
</header>



<section id="main">
  <h1 itemprop="name" id="title">GWT: Why VerticalPanel is Evil</h1>
  <div>
        <article itemprop="articleBody" id="content">
           <p>At <a href="http://www.lmaxtrader.co.uk/about-lmax">LMAX</a> we adopted <a href="http://code.google.com/webtoolkit/gettingstarted.html">Google Web Toolkit</a> pretty early on. &nbsp;One of the motivations for using it was so we only had to worry about recruiting Java guys, and then we could all work on every part of the application including the web UI. &nbsp;Sure, you can learn a bunch of different skills if you want to, but it reduced context-switching and kept the skill set we were hiring for to a nice short list.<br /><div><br /></div><div>The problem is that GWT does a very nice job of pretending to be Java whilst actually compiling down to HTML and JavaScript. &nbsp;If you don&rsquo;t have some understanding of the end result (the <a href="http://www.w3.org/DOM/">DOM</a> the browser is going to be rendering) it&rsquo;s going to be hard to get the performance you need from a <a href="http://www.lmaxtrader.co.uk/trading-platforms/web-platform">low-latency trading application</a>.</div><div><br /></div><div>My number one bug-bear with GWT is <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/user/client/ui/VerticalPanel.html">VerticalPanel</a>. &nbsp;To the uninitiated developer, this seems like the sort of thing that will be useful everywhere. &nbsp;You often want stuff stacked on top of each other - think menus, lists, the layout of a dialog. &nbsp;What is not obvious is that it uses tables for layout under the covers, and I&rsquo;ve mentioned in the past that <a href="http://mechanitis.blogspot.com/2011/01/css-for-developers-horizontal-layout.html">Tables Should Not Be Used For Layout</a>.</div><div><br /></div><div>A much less obvious way of getting the same result with (usually) no extra effort is to use <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/user/client/ui/FlowPanel.html">FlowPanel</a>. &nbsp;This is rendered as a div, and most of the time the elements that get inserted into it will render in a vertical stack.<br /><br /></div><div><b>VerticalPanel Code</b><br /><blockquote><code>VerticalPanel panel = new VerticalPanel();<br />panel.add(/* your widget <em>/);<br />panel.add(/</em> your second widget <em>/);<br /></code></blockquote></div><div><b>VerticalPanel Rendered As HTML</b></div><div><blockquote><pre><code>&lt;table&gt;<br />  &lt;tbody&gt;<br />    &lt;tr&gt;<br />      &lt;td&gt;<br />        &lt;!&ndash; your widget here &ndash;&gt;<br />      &lt;/td&gt;<br />     &lt;tr&gt;<br />    &lt;tr&gt;<br />      &lt;td&gt;<br />        &lt;!&ndash; your second widget here &ndash;&gt;<br />      &lt;/td&gt;<br />     &lt;tr&gt;<br />  &lt;/tbody&gt;<br />&lt;table&gt;<br /></code></pre></blockquote></div><div><b>FlowPanel Code</b><br /><blockquote><code>FlowPanel panel = new FlowPanel();<br />panel.add(/</em> your widget <em>/);<br />panel.add(/</em> your second widget */);</code></blockquote></div><div><b>FlowPanel Rendered As HTML</b></div><div><blockquote><pre><code>&lt;div&gt;<br />  &lt;!&ndash; your widget here &ndash;&gt;<br />  &lt;!&ndash; your second widget here &ndash;&gt;<br />&lt;/div&gt;<br /></code></pre></blockquote>You can see that the DOM generated for a very similar-looking 3 lines of code is much much smaller for <code>FlowPanel</code>.<br /><br /><span class="Apple-style-span" style="font-size: large;">Who Cares?</span><br />Right, but we&rsquo;re only talking about a few more elements, and browsers are pretty smart about optimising these things. &nbsp;Right?<br /><br />Maybe. &nbsp;But if you use <code>VerticalPanel</code> for all your containers, for every box which needs to be a slightly different colour, for every place you want to change the alignment slightly, things get very big very fast. &nbsp;This is an example of real code from an early prototype, where we had several nested panels (not unheard of if you&rsquo;ve got a complex dialog box with lots of elements in it. &nbsp;Like, say, a deal ticket). &nbsp;And I&rsquo;ve stripped out a lot of the table attributes that made this even more heinous:</div><br /><blockquote><pre><code>&lt;table&gt;<br />  &lt;tbody&gt;<br />    &lt;tr&gt;<br />      &lt;td align=&ldquo;left&rdquo;&gt;<br />        &lt;table id=&ldquo;panel1&rdquo;&gt;<br />          &lt;tbody&gt;<br />            &lt;tr&gt;<br />              &lt;td align=&ldquo;left&rdquo; style=&ldquo;vertical-align: top;&rdquo;&gt;<br />                &lt;table class=&ldquo;orders-input&rdquo;&gt;<br />                  &lt;tbody&gt;<br />                    &lt;tr&gt;<br />                      &lt;td align=&ldquo;left&rdquo;&gt;<br />                        &lt;table class=&ldquo;row&rdquo;&gt;<br />                          &lt;tbody&gt;<br />                            &lt;tr&gt;<br />                              &lt;td align=&ldquo;left&rdquo;&gt;<br />                                &lt;table id=&ldquo;container&rdquo;&gt;<br />                                  &lt;tbody&gt;<br />                                    &lt;tr&gt;<br />                                      &lt;table id=&ldquo;panel2&rdquo;&gt;<br />                                        &lt;tbody&gt;<br />                                          &lt;tr&gt;<br />                                            &lt;td align=&ldquo;left&rdquo;&gt;<br />                                              &lt;table class=&ldquo;controls&rdquo;&gt;<br />                                                &lt;tbody&gt;<br />                                                  &lt;tr&gt;<br />                                                    &lt;td align=&ldquo;left&rdquo;&gt;<br />                                                      &lt;!&ndash; widget &ndash;&gt;<br /></code></pre></blockquote><br />For every <code>table</code> element and associated elements (<code>tbody</code>, <code>tr</code>, <code>td</code>), you would get a single div element instead if you simply replace every instance of <code>VerticalPanel</code> in this stack with a <code>FlowPanel</code>.<br /><br /><blockquote><pre><code>&lt;div&gt;<br />  &lt;div id=&ldquo;panel1&rdquo;&gt;<br />    &lt;div class=&ldquo;orders-input&rdquo;&gt;<br />      &lt;div class=&ldquo;row&rdquo;&gt;<br />        &lt;div id=&ldquo;container&rdquo;&gt;<br />          &lt;div id=&ldquo;panel2&rdquo;&gt;<br />            &lt;div class=&ldquo;controls&rdquo;&gt;<br />              &lt;!&ndash; widget &ndash;&gt;<br /></code></pre></blockquote><br />See?  Much nicer.<br /><br />This is exactly what we did do, and we saw a&nbsp;noticeable&nbsp;speed improvement across all browsers -&nbsp;noticeable&nbsp;to a real user, not just some millisecond improvement on a performance test. &nbsp;Mind you, users&rsquo; brains are amazing things and your system has to react in <a href="http://www.useit.com/papers/responsetime.html">less than 0.1 seconds for a user to perceive it as instantaneous</a>. &nbsp;So even in a browser, every millisecond counts.<br /><br />In addition to improved performance, you get a nice bonus: now the layout is no longer controlled by tables, you can really easily shove stuff around and make things look pretty with the clever use of <a href="http://mechanitis.blogspot.com/search/label/css">CSS</a>. &nbsp;If you&rsquo;re really lucky, you can chuck that stuff over to your designers and not have to do another GWT compile when someone wants to move things 3 pixels to the left. &nbsp;Which they will.</p>

        </article>
  </div>
</section>



<aside id="meta">

<div>
    <section id="datecount">
        <h4 id="date"> Fri Jan 21, 2011 </h4>
        <h5 id="wc"> 700 Words </h5>
    </section>
    <ul id="categories">
        
    </ul>
    <ul id="tags">
        
        <li><a href="http://trishagee.github.io//tags/java">java</a></li>
        
        <li><a href="http://trishagee.github.io//tags/lmax">lmax</a></li>
        
        <li><a href="http://trishagee.github.io//tags/gwt">gwt</a></li>
        
        <li><a href="http://trishagee.github.io//tags/ui">ui</a></li>
        
        <li><a href="http://trishagee.github.io//tags/html">html</a></li>
        
    </ul>
</div>

<div>
    <section id="prev">
        &nbsp;<a class="previous" href="http://trishagee.github.io/post/on_changing_the_image_of_programmers"><i class="icon-arrow-left"></i> On Changing The Image Of Programmers</a><br>
    </section>
    <section id="next">
        &nbsp;<a class="next" href="http://trishagee.github.io/post/on_how_not_to_target_girl_geeks">On How Not To Target Girl Geeks <i class="icon-arrow-right"></i></a>
    </section>
</div>

<div>
    <section id="author">
        <h4>About the Author:</h4>
        Trisha is a developer for <a href="http://mongodb.com">MongoDB Inc.</a> and a leader of the Sevilla Java User Group, she believes we
        shouldn't all have to make the same mistakes again and again.
    </section>
</div>

</aside>

<meta itemprop="wordCount" content="659">
<meta itemprop="datePublished" content="2011-01-21">
<meta itemprop="url" content="http://trishagee.github.io/post/gwt_why_verticalpanel_is_evil">


<aside id=comments>
    <div><h2> Comments </h2></div>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'trishagee';
    var disqus_identifier = 'http:\/\/trishagee.github.io\/post\/gwt_why_verticalpanel_is_evil';
    var disqus_title = 'GWT: Why VerticalPanel is Evil';
    var disqus_url = 'http:\/\/trishagee.github.io\/post\/gwt_why_verticalpanel_is_evil\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</aside>

<footer>
    <div>
        <p>
            &copy; 2013-14 <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Trisha Gee.</span></span>
            <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons Attribution">Some rights reserved</a>;
            please attribute properly and link back. <br>
            Powered by <a href="http://hugo.spf13.com">Hugo</a>.
            Original layout created by Steve Francia <a href="http://http://spf13.com/">http://spf13.com/</a>, derived from <a
                href="https://github.com/spf13/spf13.com">https://github.com/spf13/spf13.com</a>.
        </p>
    </div>
</footer>
<script type="text/javascript">

    var _gaq = _gaq || [];

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49006189-1', 'trishagee.github.io');
    ga('send', 'pageview');

    (function () {
        var j = function (a, b) {
            return window.getComputedStyle ? getComputedStyle(a).getPropertyValue(b) : a.currentStyle[b]
        };
        var k = function (a, b, c) {
            if (a.addEventListener)a.addEventListener(b, c, false); else a.attachEvent('on' + b, c)
        };
        var l = function (a, b) {
            for (key in b)if (b.hasOwnProperty(key))a[key] = b[key];
            return a
        };
        window.fitText = function (d, e, f) {
            var g = l({'minFontSize': -1 / 0, 'maxFontSize': 1 / 0}, f);
            var h = function (a) {
                var b = e || 1;
                var c = function () {
                    a.style.fontSize = Math.max(Math.min(a.clientWidth / (b * 10), parseFloat(g.maxFontSize)), parseFloat(g.minFontSize)) + 'px'
                };
                c();
                k(window, 'resize', c)
            };
            if (d.length)for (var i = 0; i < d.length; i++)h(d[i]); else h(d);
            return d
        }
    })();
    fitText(document.getElementById('title'), 1)

</script>
</body>
</html>

